<style>
.tile-container {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}
.subtile {
    flex: 1 1 30%;
    min-width: 250px;
    background: <!--COLOR_MAIN_TILES-->;
    border-radius: 8px;
    padding: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.subtile label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
}
.subtile input,
.subtile select {
    width: 100%;
    margin-bottom: 10px;
    padding: 5px;
    font-size: 1em;
    box-sizing: border-box;
}

.rooms-container {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 10px;
}
.room-tile {
    flex: 1 1 150px;
    min-width: 150px;
    background: <!--COLOR_ROOM_TILES-->;
    border-radius: 6px;
    padding: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
.room-header {
    font-weight: bold;
    font-size: 1.1em;
    margin-bottom: 5px;
}
.room-values, .room-temp-schedule {
    display: grid;
    grid-template-columns: max-content 1fr; /* 2 Spalten: Label / Wert */
    gap: 5px 10px;
}

.room-values div, .room-temp-schedule div {
    display: contents; /* Label und Wert nebeneinander */
}

.room-values div strong, .room-temp-schedule div strong {
    text-align: left; /* Label linksbündig */
}

.room-values div span, .room-temp-schedule div span {
    text-align: left; /* Wert ebenfalls linksbündig */
}

.system-info {
    margin-top: 15px;
    background: <!--COLOR_SYSTEM_INFO-->;
    border-radius: 6px;
    padding: 8px;
    display: grid;
    grid-template-columns: max-content 1fr; /* 2 Spalten */
    gap: 5px 10px;
}

.system-info div strong, .system-info div span {
    text-align: left; /* Beide Spalten linksbündig */
}
</style>

<!-- Oberste Tiles -->
<div class="tile-container">
    <!-- Tile 1: Betriebsart -->
    <div class="subtile" id="tile_mode">
        <label>Betriebsart</label>
        <select id="mode_select">
            <!--MODE_OPTIONS-->
        </select>
        <select id="mode_room_select">
            <!--FLOOR_ROOM_OPTIONS-->
        </select>
        <button id="btn_set_mode">Setzen</button>
    </div>

    <!-- Tile 2: Permanente Soll-Temperatur -->
    <div class="subtile" id="tile_temperature">
        <label>Permanente Soll-Temperatur</label>
        <input type="number" id="input_temp" value="<!--MAX_TEMP-->" />
        <select id="temp_room_select">
            <!--FLOOR_ROOM_OPTIONS-->
        </select>
        <button id="btn_set_temp">Setzen</button>
    </div>

    <!-- Tile 3: Temporäre Soll-Temperatur -->
    <div class="subtile" id="tile_target">
        <label>Temporäre Soll-Temperatur</label>
        <input type="number" id="input_target_temp" value="<!--MAX_TEMP-->" />
        <label for="duration_select">Dauer</label>
        <select id="duration_select">
            <!--DURATION_OPTIONS-->
        </select>
        <select id="target_room_select">
            <!--FLOOR_ROOM_OPTIONS-->
        </select>
        <button id="btn_set_target">Setzen</button>
    </div>
</div>

<!-- Räume anzeigen -->
<div class="rooms-container" id="rooms-container">
    <!--ROOM_TILES-->
</div>

<!-- Systeminformationen -->
<div class="system-info" id="system-info">
    <h3>System Info</h3>
    <div><strong>Hardware:</strong> <span id="sys-hw">--</span></div>
    <div><strong>Software Datum:</strong> <span id="sys-swdate">--</span></div>
    <div><strong>Branch:</strong> <span id="sys-branch">--</span></div>
    <div><strong>OS:</strong> <span id="sys-os">--</span></div>
    <div><strong>Filesystem Build:</strong> <span id="sys-fbi">--</span></div>
    <div><strong>App kompatibel:</strong> <span id="sys-appcompat">--</span></div>
</div>

<script>
// EventListener zentralisiert
document.getElementById('btn_set_mode').addEventListener('click', function() {
    const mode = parseInt(document.getElementById('mode_select').value);
    const roomId = parseInt(document.getElementById('mode_room_select').value);
    RequestAction('Mode', { roomId: roomId, mode: mode });
});

document.getElementById('btn_set_temp').addEventListener('click', function() {
    const temp = parseFloat(document.getElementById('input_temp').value);
    const roomId = parseInt(document.getElementById('temp_room_select').value);
    RequestAction('Temp', { roomId: roomId, temp: temp });
});

document.getElementById('btn_set_target').addEventListener('click', function() {
    const temp = parseFloat(document.getElementById('input_target_temp').value);
    const roomId = parseInt(document.getElementById('target_room_select').value);
    const duration = parseInt(document.getElementById('duration_select').value);
    RequestAction('TargetTemp', { roomId: roomId, temp: temp, duration: duration });
});
</script>
